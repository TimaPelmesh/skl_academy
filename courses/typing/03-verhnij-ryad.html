<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Урок 3: Верхний ряд клавиатуры. Изучите клавиши верхнего ряда QWERTY UIOP и научитесь печатать вслепую используя все ряды.">
    <meta name="keywords" content="скоростная печать, слепая печать, верхний ряд клавиатуры, QWERTY, UIOP">
    <meta name="format-detection" content="telephone=no">
    <title>Верхний ряд клавиатуры - Курс скоростной печати</title>
    
    <!-- Favicon / Иконки сайта -->
    <link rel="icon" href="../../images/icon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="../../images/icon.ico" type="image/x-icon">
    
    <!-- Стили -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/mobile.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="lessons-styles.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap');
        
        body {
            font-family: 'Montserrat', sans-serif;
            background: var(--background);
            color: var(--text);
        }
        
        /* Стили для тренажера в уроке */
        .practice-container {
            margin: 30px 0;
            background-color: var(--lesson-bg);
            border-radius: var(--lesson-radius);
            padding: 20px;
            border: 1px solid var(--lesson-border);
        }
        
        .keyboard-visualizer {
            margin: 20px 0;
            position: relative;
        }
        
        .keyboard {
            display: grid;
            grid-template-columns: repeat(15, 1fr);
            gap: 5px;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .key {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--lesson-card-bg);
            border: 1px solid var(--lesson-border);
            border-radius: 5px;
            font-size: 1rem;
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: all 0.2s;
            user-select: none;
        }
        
        .key.active {
            background-color: var(--lesson-accent);
            color: white;
            transform: translateY(2px);
            box-shadow: 0 0 8px var(--lesson-accent);
        }
        
        .key.highlight {
            animation: pulse-highlight 1s infinite;
        }
        
        .key.correct {
            background-color: var(--lesson-success);
            color: white;
        }
        
        .key.incorrect {
            background-color: var(--lesson-danger);
            color: white;
        }
        
        .key.base-row {
            border: 2px solid var(--lesson-accent);
        }
        
        .key.upper-row {
            border: 2px solid #4169e1;
        }
        
        @keyframes pulse-highlight {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
        }
        
        .shake {
            animation: shake 0.3s cubic-bezier(.36,.07,.19,.97) both;
        }
        
        .hand-indicator {
            display: flex;
            justify-content: space-around;
            margin: 15px 0;
        }
        
        .finger {
            width: 20px;
            height: 40px;
            background-color: #f8d7da;
            border-radius: 10px 10px 20px 20px;
            position: relative;
            cursor: help;
        }
        
        .finger::before {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            right: 0;
            height: 10px;
            background-color: #f5c6cb;
            border-radius: 5px;
        }
        
        .finger.active {
            background-color: #d4edda;
        }
        
        .finger.active::before {
            background-color: #c3e6cb;
        }
        
        .practice-text {
            font-family: monospace;
            font-size: 1.5rem;
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background-color: var(--lesson-card-bg);
            border-radius: 10px;
            letter-spacing: 2px;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .practice-text span {
            display: inline-block;
            position: relative;
            margin: 0 2px;
        }
        
        .practice-text span.active {
            background-color: rgba(67, 97, 238, 0.2);
            border-radius: 4px;
        }
        
        .practice-text span.correct {
            color: var(--lesson-success);
        }
        
        .practice-text span.incorrect {
            color: var(--lesson-danger);
            text-decoration: underline wavy var(--lesson-danger);
        }
        
        .practice-input {
            position: absolute;
            top: -9999px;
            left: -9999px;
        }
        
        .practice-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        
        .practice-btn {
            padding: 10px 20px;
            background-color: var(--lesson-accent);
            color: white;
            border: none;
            border-radius: var(--lesson-radius-sm);
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.2s;
        }
        
        .practice-btn:hover {
            background-color: var(--lesson-accent-hover);
        }
        
        .practice-btn.reset {
            background-color: var(--lesson-text-secondary);
        }
        
        .practice-btn.reset:hover {
            background-color: var(--lesson-text);
        }
    </style>
</head>
<body>
    <!-- Шапка -->
    <header class="typing-header">
        <div class="container header-container">
            <h1 class="header-title">Курс скоростной печати</h1>
            <a href="../../index.html" class="exit-btn" title="Вернуться на главную">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/></svg>
            </a>
        </div>
    </header>

    <!-- Основной контент -->
    <main class="lesson-container">
        <div class="lesson-wrapper">
            <!-- Заголовок урока -->
            <div class="lesson-header">
                <h2>Верхний ряд клавиатуры</h2>
                <p class="lesson-subtitle">Освоение клавиш верхнего ряда: QWERTY UIOP</p>
                <div class="progress-indicator">
                    <span class="progress-text">Урок 3 из 10</span>
                    <div class="progress-bar-container">
                        <div class="progress-bar" style="width: 30%"></div>
                    </div>
                </div>
            </div>
            
            <!-- Содержание урока -->
            <div class="lesson-content">
                <section class="lesson-section">
                    <h3><i class="fas fa-arrow-up"></i> Переходим к верхнему ряду</h3>
                    <p>
                        После освоения базового ряда клавиатуры, пришло время изучить <strong>верхний ряд</strong> клавиш: <strong>QWERTY UIOP</strong>. Эти клавиши используются очень часто при наборе текста, особенно при работе с английским языком.
                    </p>
                    
                    <p>
                        Принцип работы с верхним рядом такой же, как и с базовым: каждый палец должен дотянуться до соответствующих клавиш верхнего ряда, а затем <strong>вернуться в исходную позицию</strong> на клавиши базового ряда ASDF JKL;.
                    </p>
                    
                    <div class="image-container">
                        <img src="https://i.imgur.com/aJQHkP3.png" alt="Верхний ряд клавиатуры" class="lesson-image">
                        <p class="image-caption">Клавиши верхнего ряда QWERTY UIOP и соответствующие им пальцы</p>
                    </div>
                </section>
                
                <section class="lesson-section">
                    <h3><i class="fas fa-hand-point-up"></i> Распределение пальцев по клавишам верхнего ряда</h3>
                    
                    <p>
                        Каждый палец отвечает за нажатие определенных клавиш верхнего ряда:
                    </p>
                    
                    <ul class="lesson-list">
                        <li><strong>Левая рука:</strong>
                            <ul>
                                <li><strong>Мизинец (A)</strong> — поднимается к клавише <strong>Q</strong></li>
                                <li><strong>Безымянный палец (S)</strong> — поднимается к клавише <strong>W</strong></li>
                                <li><strong>Средний палец (D)</strong> — поднимается к клавише <strong>E</strong></li>
                                <li><strong>Указательный палец (F)</strong> — поднимается к клавишам <strong>R</strong> и <strong>T</strong></li>
                            </ul>
                        </li>
                        <li><strong>Правая рука:</strong>
                            <ul>
                                <li><strong>Указательный палец (J)</strong> — поднимается к клавишам <strong>Y</strong> и <strong>U</strong></li>
                                <li><strong>Средний палец (K)</strong> — поднимается к клавише <strong>I</strong></li>
                                <li><strong>Безымянный палец (L)</strong> — поднимается к клавише <strong>O</strong></li>
                                <li><strong>Мизинец (;)</strong> — поднимается к клавише <strong>P</strong></li>
                            </ul>
                        </li>
                    </ul>
                    
                    <div class="info-box">
                        <p>
                            <i class="fas fa-lightbulb"></i> Обратите внимание, что указательные пальцы обеих рук отвечают за нажатие двух клавиш в верхнем ряду. Это связано с тем, что указательные пальцы обладают наибольшей подвижностью и точностью.
                        </p>
                    </div>
                </section>
                
                <section class="lesson-section">
                    <h3><i class="fas fa-dumbbell"></i> Упражнения для освоения верхнего ряда</h3>
                    
                    <p>
                        Прежде чем переходить к упражнениям, убедитесь, что вы хорошо освоили базовый ряд ASDF JKL;. Начните с того, что положите пальцы в исходную позицию на клавиши базового ряда.
                    </p>
                    
                    <div class="warning-box">
                        <p>
                            <i class="fas fa-exclamation-triangle"></i> <strong>Важно!</strong> После каждого нажатия клавиши верхнего ряда палец должен вернуться в исходную позицию на базовом ряду. Этот навык критически важен для развития скорости и точности печати.
                        </p>
                    </div>
                    
                    <h4>Упражнение 1: Отработка движений отдельных пальцев</h4>
                    <p>
                        Начните с простых упражнений на каждый палец отдельно. Каждое упражнение повторите 5-10 раз:
                    </p>
                    
                    <ul class="lesson-list">
                        <li><strong>frf</strong> — указательный палец левой руки</li>
                        <li><strong>ftf</strong> — указательный палец левой руки</li>
                        <li><strong>ded</strong> — средний палец левой руки</li>
                        <li><strong>sws</strong> — безымянный палец левой руки</li>
                        <li><strong>aqa</strong> — мизинец левой руки</li>
                        <li><strong>juj</strong> — указательный палец правой руки</li>
                        <li><strong>jyj</strong> — указательный палец правой руки</li>
                        <li><strong>kik</strong> — средний палец правой руки</li>
                        <li><strong>lol</strong> — безымянный палец правой руки</li>
                        <li><strong>;p;</strong> — мизинец правой руки</li>
                    </ul>
                    
                    <h4>Упражнение 2: Освоение верхнего ряда</h4>
                    <p>
                        Теперь выполните упражнения, которые включают в себя клавиши верхнего ряда последовательно:
                    </p>
                    
                    <ul class="lesson-list">
                        <li><strong>qwertyuiop</strong> — весь верхний ряд слева направо</li>
                        <li><strong>poiuytrewq</strong> — весь верхний ряд справа налево</li>
                        <li><strong>qwerty asdfgh</strong> — комбинация клавиш верхнего и базового рядов</li>
                        <li><strong>yuiop jkl;</strong> — комбинация клавиш верхнего и базового рядов</li>
                    </ul>
                    
                    <h4>Упражнение 3: Короткие слова с верхним рядом</h4>
                    <p>
                        Попрактикуйтесь в наборе коротких слов, используя клавиши как базового, так и верхнего рядов:
                    </p>
                    
                    <ul class="lesson-list">
                        <li><strong>we, ray, were, you, tray, quit, top</strong> — простые слова</li>
                        <li><strong>type, power, request, quite, apple</strong> — более сложные слова</li>
                        <li><strong>the way, potato pie, quality work</strong> — словосочетания</li>
                    </ul>
                </section>
                
                <section class="lesson-section">
                    <h3><i class="fas fa-keyboard"></i> Интерактивный тренажер</h3>
                    
                    <p>
                        Используйте интерактивный тренажер для закрепления навыков работы с верхним рядом клавиатуры. Следите за подсветкой клавиш и старайтесь набирать текст, не глядя на клавиатуру.
                    </p>
                    
                    <div class="practice-container">
                        <h4>Тренажер верхнего ряда</h4>
                        <p>Нажмите кнопку "Начать" для запуска упражнения. Следите за подсветкой клавиш.</p>
                        
                        <div class="practice-text" id="practiceText">
                            Нажмите "Начать" для запуска упражнения
                        </div>
                        
                        <!-- Тренажер будет добавлен позже через JavaScript -->
                    </div>
                </section>
                
                <section class="lesson-section">
                    <h3><i class="fas fa-clipboard-check"></i> Критерии освоения верхнего ряда</h3>
                    
                    <p>
                        Верхний ряд клавиатуры считается освоенным, когда вы можете:
                    </p>
                    
                    <ul class="lesson-list">
                        <li>Печатать слова, используя комбинацию клавиш базового и верхнего рядов, не глядя на клавиатуру</li>
                        <li>Автоматически возвращать пальцы в исходную позицию после нажатия клавиш верхнего ряда</li>
                        <li>Набирать простые предложения с использованием клавиш обоих рядов с минимальным количеством ошибок</li>
                        <li>Достичь скорости печати не менее 80-100 знаков в минуту при работе с изученными рядами</li>
                    </ul>
                    
                    <div class="info-box">
                        <p>
                            <i class="fas fa-lightbulb"></i> При освоении нового ряда клавиатуры скорость печати может временно снизиться. Это нормально! Продолжайте практиковаться, и вскоре скорость начнет расти.
                        </p>
                    </div>
                </section>
                
                <section class="lesson-section">
                    <h3><i class="fas fa-tasks"></i> Домашнее задание</h3>
                    
                    <p>
                        Для закрепления навыков работы с верхним рядом клавиатуры выполните следующие задания:
                    </p>
                    
                    <ol class="lesson-list">
                        <li>Ежедневно выполняйте все упражнения из этого урока по 10-15 минут</li>
                        <li>Наберите следующие предложения не менее 5 раз каждое:
                            <ul>
                                <li>We were quite happy to see you at the party.</li>
                                <li>The power of type is to request all quality work.</li>
                                <li>Please type your request for our top quality work.</li>
                            </ul>
                        </li>
                        <li>Потренируйтесь в наборе фраз, используя тренажер, не менее 20 минут в день</li>
                        <li>В конце недели пройдите тест на скорость набора текста с использованием базового и верхнего рядов</li>
                    </ol>
                    
                    <div class="warning-box">
                        <p>
                            <i class="fas fa-exclamation-triangle"></i> <strong>Важно!</strong> Не пытайтесь сразу достичь высокой скорости. Фокусируйтесь на точности и правильной технике набора текста. Скорость придет с практикой.
                        </p>
                    </div>
                </section>
            </div>
            
            <!-- Навигация по урокам -->
            <div class="lesson-navigation">
                <a href="02-bazovyj-ryad.html" class="nav-btn">
                    <i class="fas fa-angle-left"></i> Предыдущий урок
                </a>
                <a href="test.html" class="nav-btn practice-btn">
                    Проверить скорость <i class="fas fa-tachometer-alt"></i>
                </a>
                <a href="04-nizhnij-ryad.html" class="nav-btn">
                    Следующий урок <i class="fas fa-angle-right"></i>
                </a>
            </div>
        </div>
    </main>

    <script>
        // Упражнения для верхнего ряда клавиатуры
        const exercises = [
            "qwerty qwerty qwerty",
            "yuiop yuiop yuiop",
            "qwertyuiop poiuytrewq",
            "qwerty asdf yuiop jkl;",
            "qwert asdfg poiuy jkl;",
            "we were quit type you",
            "type the request for quality work",
            "the power of quick typing",
            "please eat your apple pie quietly",
            "we request your quality work today"
        ];

        // DOM элементы
        const practiceTextElement = document.getElementById('practiceText');
        
        // Добавляем элементы тренажера
        function initializePracticeContainer() {
            const practiceContainer = document.querySelector('.practice-container');
            
            // Создаем визуализатор клавиатуры
            const keyboardVisualizer = document.createElement('div');
            keyboardVisualizer.className = 'keyboard-visualizer';
            
            // Создаем клавиатуру
            const keyboard = document.createElement('div');
            keyboard.id = 'keyboard';
            keyboard.className = 'keyboard';
            keyboardVisualizer.appendChild(keyboard);
            
            // Создаем индикатор пальцев
            const handIndicator = document.createElement('div');
            handIndicator.className = 'hand-indicator';
            
            const fingers = [
                { id: 'left-pinky', label: 'Мизинец Л' },
                { id: 'left-ring', label: 'Безымянный Л' },
                { id: 'left-middle', label: 'Средний Л' },
                { id: 'left-index', label: 'Указательный Л' },
                { id: 'left-thumb', label: 'Большой Л' },
                { id: 'right-thumb', label: 'Большой П' },
                { id: 'right-index', label: 'Указательный П' },
                { id: 'right-middle', label: 'Средний П' },
                { id: 'right-ring', label: 'Безымянный П' },
                { id: 'right-pinky', label: 'Мизинец П' }
            ];
            
            fingers.forEach(finger => {
                const fingerElement = document.createElement('div');
                fingerElement.className = 'finger';
                fingerElement.setAttribute('data-finger', finger.id);
                fingerElement.setAttribute('title', finger.label);
                handIndicator.appendChild(fingerElement);
            });
            
            keyboardVisualizer.appendChild(handIndicator);
            
            // Добавляем скрытое поле ввода
            const inputElement = document.createElement('input');
            inputElement.type = 'text';
            inputElement.id = 'practiceInput';
            inputElement.className = 'practice-input';
            inputElement.setAttribute('autocomplete', 'off');
            
            // Добавляем кнопки управления
            const controlsDiv = document.createElement('div');
            controlsDiv.className = 'practice-controls';
            
            const startButton = document.createElement('button');
            startButton.id = 'startBtn';
            startButton.className = 'practice-btn';
            startButton.innerHTML = '<i class="fas fa-play"></i> Начать';
            
            const resetButton = document.createElement('button');
            resetButton.id = 'resetBtn';
            resetButton.className = 'practice-btn reset';
            resetButton.innerHTML = '<i class="fas fa-redo"></i> Сбросить';
            
            controlsDiv.appendChild(startButton);
            controlsDiv.appendChild(resetButton);
            
            // Добавляем все элементы в контейнер
            practiceContainer.insertBefore(keyboardVisualizer, practiceContainer.querySelector('.practice-text').nextSibling);
            practiceContainer.appendChild(inputElement);
            practiceContainer.appendChild(controlsDiv);
        }

        // Данные для клавиатуры
        const keyboardLayout = [
            ['`', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '-', '=', 'Backspace', 'Backspace'],
            ['Tab', 'Tab', 'q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p', '[', ']', '\\'],
            ['Caps', 'Caps', 'a', 's', 'd', 'f', 'g', 'h', 'j', 'k', 'l', ';', '\'', 'Enter', 'Enter'],
            ['Shift', 'Shift', 'z', 'x', 'c', 'v', 'b', 'n', 'm', ',', '.', '/', 'Shift', 'Shift', 'Shift'],
            ['Ctrl', 'Win', 'Alt', ' ', ' ', ' ', ' ', ' ', 'Alt', 'Win', 'Menu', 'Ctrl', 'Ctrl', 'Ctrl', 'Ctrl']
        ];

        const upperRowKeys = ['q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p'];
        const baseRowKeys = ['a', 's', 'd', 'f', 'j', 'k', 'l', ';'];
        
        // Соответствие клавиш пальцам
        const fingerMap = {
            '`': 'left-pinky', '1': 'left-pinky', '2': 'left-ring', '3': 'left-middle', '4': 'left-index', 
            '5': 'left-index', '6': 'right-index', '7': 'right-index', '8': 'right-middle', '9': 'right-ring', 
            '0': 'right-pinky', '-': 'right-pinky', '=': 'right-pinky', 'Backspace': 'right-pinky',
            
            'Tab': 'left-pinky', 'q': 'left-pinky', 'w': 'left-ring', 'e': 'left-middle', 'r': 'left-index', 
            't': 'left-index', 'y': 'right-index', 'u': 'right-index', 'i': 'right-middle', 'o': 'right-ring', 
            'p': 'right-pinky', '[': 'right-pinky', ']': 'right-pinky', '\\': 'right-pinky',
            
            'Caps': 'left-pinky', 'a': 'left-pinky', 's': 'left-ring', 'd': 'left-middle', 'f': 'left-index', 
            'g': 'left-index', 'h': 'right-index', 'j': 'right-index', 'k': 'right-middle', 'l': 'right-ring', 
            ';': 'right-pinky', '\'': 'right-pinky', 'Enter': 'right-pinky',
            
            'Shift': 'left-pinky', 'z': 'left-pinky', 'x': 'left-ring', 'c': 'left-middle', 'v': 'left-index', 
            'b': 'left-index', 'n': 'right-index', 'm': 'right-index', ',': 'right-middle', '.': 'right-ring', 
            '/': 'right-pinky',
            
            'Ctrl': 'left-pinky', 'Win': 'left-thumb', 'Alt': 'left-thumb', ' ': 'right-thumb', 
            'Menu': 'right-pinky'
        };

        // Переменные состояния
        let currentExercise = "";
        let currentPosition = 0;
        let isExerciseActive = false;

        // Инициализация клавиатуры
        function initKeyboard() {
            const keyboardElement = document.getElementById('keyboard');
            keyboardElement.innerHTML = '';
            
            keyboardLayout.forEach((row, rowIndex) => {
                row.forEach((key, keyIndex) => {
                    const keyElement = document.createElement('div');
                    keyElement.className = 'key';
                    keyElement.textContent = key;
                    keyElement.dataset.key = key.toLowerCase();
                    
                    // Стили для специальных клавиш
                    if (key === 'Backspace' || key === 'Tab' || key === 'Caps' || key === 'Shift' || key === 'Enter' || key === 'Ctrl') {
                        keyElement.style.gridColumn = 'span 2';
                    }
                    
                    if (key === ' ') {
                        keyElement.style.gridColumn = 'span 5';
                        keyElement.textContent = 'Space';
                    }
                    
                    // Выделение клавиш базового ряда
                    if (baseRowKeys.includes(key.toLowerCase())) {
                        keyElement.classList.add('base-row');
                    }
                    
                    // Выделение клавиш верхнего ряда
                    if (upperRowKeys.includes(key.toLowerCase())) {
                        keyElement.classList.add('upper-row');
                    }
                    
                    keyboardElement.appendChild(keyElement);
                });
            });
        }

        // Отображение упражнения
        function displayExercise(text) {
            practiceTextElement.innerHTML = '';
            
            text.split('').forEach((char, index) => {
                const charSpan = document.createElement('span');
                charSpan.textContent = char;
                practiceTextElement.appendChild(charSpan);
            });
        }

        // Обновление статуса упражнения
        function updateExerciseStatus() {
            // Сбросить все состояния
            document.querySelectorAll('.key').forEach(key => {
                key.classList.remove('active', 'highlight', 'correct', 'incorrect');
            });
            
            document.querySelectorAll('.finger').forEach(finger => {
                finger.classList.remove('active');
            });
            
            document.querySelectorAll('.practice-text span').forEach((span, index) => {
                span.classList.remove('active', 'correct', 'incorrect');
                
                if (index < currentPosition) {
                    span.classList.add('correct');
                } else if (index === currentPosition) {
                    span.classList.add('active');
                    
                    // Подсветить соответствующую клавишу и палец
                    const currentChar = span.textContent.toLowerCase();
                    const keyElement = document.querySelector(`.key[data-key="${currentChar}"]`);
                    
                    if (keyElement) {
                        keyElement.classList.add('highlight');
                        
                        // Подсветить соответствующий палец
                        const fingerType = fingerMap[currentChar];
                        if (fingerType) {
                            document.querySelector(`.finger[data-finger="${fingerType}"]`).classList.add('active');
                        }
                    }
                }
            });
        }

        // Начать упражнение
        function startExercise() {
            // Выбрать случайное упражнение
            const randomIndex = Math.floor(Math.random() * exercises.length);
            currentExercise = exercises[randomIndex];
            
            // Отобразить упражнение
            displayExercise(currentExercise);
            
            // Сбросить текущую позицию
            currentPosition = 0;
            
            // Обновить статус
            updateExerciseStatus();
            
            // Активировать флаг упражнения
            isExerciseActive = true;
            
            // Сфокусироваться на скрытом поле ввода
            const practiceInputElement = document.getElementById('practiceInput');
            practiceInputElement.value = '';
            practiceInputElement.focus();
            
            // Изменить текст кнопки
            const startButton = document.getElementById('startBtn');
            startButton.innerHTML = '<i class="fas fa-pause"></i> Пауза';
        }

        // Сбросить упражнение
        function resetExercise() {
            isExerciseActive = false;
            currentPosition = 0;
            practiceTextElement.innerHTML = 'Нажмите "Начать" для запуска упражнения';
            
            const startButton = document.getElementById('startBtn');
            startButton.innerHTML = '<i class="fas fa-play"></i> Начать';
            
            document.querySelectorAll('.key').forEach(key => {
                key.classList.remove('active', 'highlight', 'correct', 'incorrect');
            });
            
            document.querySelectorAll('.finger').forEach(finger => {
                finger.classList.remove('active');
            });
        }

        // Обработчик нажатия клавиш
        function handleKeyDown(e) {
            if (!isExerciseActive) return;
            
            const key = e.key;
            
            // Предотвратить стандартное поведение для некоторых клавиш
            if (key === 'Tab') {
                e.preventDefault();
            }
            
            // Если текущий символ соответствует нажатой клавише
            if (currentPosition < currentExercise.length) {
                const currentChar = currentExercise[currentPosition];
                
                // Визуализировать нажатие на клавиатуре
                const keyElement = document.querySelector(`.key[data-key="${key.toLowerCase()}"]`);
                if (keyElement) {
                    keyElement.classList.add('active');
                    setTimeout(() => {
                        keyElement.classList.remove('active');
                    }, 100);
                }
                
                // Проверить правильность ввода
                if (key === currentChar || 
                    (key === ' ' && currentChar === ' ')) {
                    // Правильный ввод
                    const spans = document.querySelectorAll('.practice-text span');
                    if (spans[currentPosition]) {
                        spans[currentPosition].classList.remove('active');
                        spans[currentPosition].classList.add('correct');
                    }
                    currentPosition++;
                    
                    // Если достигнут конец упражнения
                    if (currentPosition >= currentExercise.length) {
                        setTimeout(() => {
                            alert("Упражнение завершено успешно! Хотите продолжить с новым упражнением?");
                            startExercise();
                        }, 500);
                    } else {
                        updateExerciseStatus();
                    }
                } else {
                    // Неправильный ввод
                    const currentSpan = document.querySelectorAll('.practice-text span')[currentPosition];
                    if (currentSpan) {
                        currentSpan.classList.add('incorrect');
                        
                        // Добавить анимацию тряски
                        currentSpan.classList.add('shake');
                        setTimeout(() => {
                            currentSpan.classList.remove('shake');
                        }, 500);
                    }
                    
                    if (keyElement) {
                        keyElement.classList.add('incorrect');
                        setTimeout(() => {
                            keyElement.classList.remove('incorrect');
                        }, 300);
                    }
                }
            }
        }

        // Инициализация
        document.addEventListener('DOMContentLoaded', () => {
            // Инициализировать тренажер
            initializePracticeContainer();
            
            // Инициализировать клавиатуру
            initKeyboard();
            
            // Добавить стили для верхнего ряда
            const styleElement = document.createElement('style');
            styleElement.textContent = `
                .key.upper-row {
                    border: 2px solid #4169e1;
                }
            `;
            document.head.appendChild(styleElement);
            
            // Добавить обработчики событий
            const startButton = document.getElementById('startBtn');
            const resetButton = document.getElementById('resetBtn');
            const practiceInputElement = document.getElementById('practiceInput');
            
            startButton.addEventListener('click', () => {
                if (isExerciseActive) {
                    isExerciseActive = false;
                    startButton.innerHTML = '<i class="fas fa-play"></i> Продолжить';
                } else {
                    if (currentPosition === 0 || currentPosition >= currentExercise.length) {
                        startExercise();
                    } else {
                        isExerciseActive = true;
                        startButton.innerHTML = '<i class="fas fa-pause"></i> Пауза';
                        practiceInputElement.focus();
                    }
                }
            });
            
            resetButton.addEventListener('click', resetExercise);
            
            // Слушатель событий клавиатуры для скрытого поля ввода
            practiceInputElement.addEventListener('keydown', handleKeyDown);
            
            // Клик по контейнеру тренажера фокусирует скрытое поле ввода
            document.querySelector('.practice-container').addEventListener('click', () => {
                practiceInputElement.focus();
            });
        });
    </script>
</body>
</html> 