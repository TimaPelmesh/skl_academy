<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π JavaScript: Promise, async/await, Fetch API, —Ä–∞–±–æ—Ç–∞ —Å REST API, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫.">
    <meta name="keywords" content="async await, promise, fetch api, rest api, javascript –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å">
    <meta name="author" content="SKL Academy">
    <title>–í–µ–±‚Äë—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ ‚Äî –ú–æ–¥—É–ª—å 8: Async & API | SKL Academy</title>
    <link rel="canonical" href="https://skl-academy.ru/courses/web/08-async-apis.html">
    <link rel="stylesheet" href="../courses.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css">
    <link rel="icon" href="../../images/icon.ico" type="image/x-icon">
</head>
<body data-course="web">
    <header>
        <div class="menu-toggle" id="menuToggle"><span></span><span></span><span></span></div>
        <h1 class="header-title">Async</h1>
        <div class="header-buttons">
            <div class="color-scheme-buttons">
                <button class="color-scheme-btn" data-color="purple"><span class="color-dot" style="background: #6c63ff;"></span></button>
                <button class="color-scheme-btn" data-color="orange"><span class="color-dot" style="background: #f97316;"></span></button>
                <button class="color-scheme-btn" data-color="blue"><span class="color-dot" style="background: #3b82f6;"></span></button>
            </div>
            <button class="theme-toggle-btn" id="themeToggle">
                <svg class="theme-icon-sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0z"/></svg>
                <svg class="theme-icon-moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.98 10.503 10.503 0 01-9.694 6.46c-5.799 0-10.5-4.701-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 01.818.162z" clip-rule="evenodd"/></svg>
            </button>
            <button class="mobile-settings-btn" id="mobileSettingsTrigger">‚öô</button>
            <a href="../../index.html" class="exit-btn">üè†</a>
        </div>
    </header>

    <div class="container">
        <div id="sidebar" class="sidebar">
            <div class="course-structure">
                <div class="topic">
                    <button class="topic-btn">1. HTML</button>
                    <div class="subtopics">
                        <a href="01-html-basics.html#html-intro" class="subtopic">–í–≤–µ–¥–µ–Ω–∏–µ –≤ HTML</a>
                        <a href="01-html-basics.html#text-content" class="subtopic">–¢–µ–∫—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç</a>
                        <a href="01-html-basics.html#links-images" class="subtopic">–°—Å—ã–ª–∫–∏ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</a>
                        <a href="01-html-basics.html#semantic-markup" class="subtopic">–°–µ–º–∞–Ω—Ç–∏–∫–∞</a>
                        <a href="01-html-basics.html#forms" class="subtopic">–§–æ—Ä–º—ã</a>
                        <a href="01-html-basics.html#a11y-aria" class="subtopic">A11y –∏ ARIA</a>
                        <a href="01-html-basics.html#seo-html" class="subtopic">SEO</a>
                        <a href="01-html-basics.html#media-retina" class="subtopic">–ú–µ–¥–∏–∞ –∏ Retina</a>
                        <a href="01-html-basics.html#module1-project" class="subtopic">–ü—Ä–æ–µ–∫—Ç</a>
                    </div>
                </div>
                <div class="topic">
                    <button class="topic-btn">2. CSS</button>
                    <div class="subtopics">
                        <a href="02-css-basics.html#css-intro" class="subtopic">–í–≤–µ–¥–µ–Ω–∏–µ</a>
                        <a href="02-css-basics.html#specificity" class="subtopic">–°–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ—Å—Ç—å</a>
                        <a href="02-css-basics.html#typography" class="subtopic">–¢–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞</a>
                        <a href="02-css-basics.html#box-model" class="subtopic">Box Model</a>
                        <a href="02-css-basics.html#positioning" class="subtopic">–ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</a>
                        <a href="02-css-basics.html#flexbox" class="subtopic">Flexbox</a>
                        <a href="02-css-basics.html#grid" class="subtopic">Grid</a>
                        <a href="02-css-basics.html#responsive" class="subtopic">@media</a>
                        <a href="02-css-basics.html#animations" class="subtopic">–ê–Ω–∏–º–∞—Ü–∏–∏</a>
                        <a href="02-css-basics.html#module2-project" class="subtopic">–ü—Ä–æ–µ–∫—Ç</a>
                    </div>
                </div>
                <div class="topic">
                    <button class="topic-btn">3. JavaScript</button>
                    <div class="subtopics">
                        <a href="03-javascript-basics.html#js-intro" class="subtopic">–í–≤–µ–¥–µ–Ω–∏–µ –≤ JS</a>
                        <a href="03-javascript-basics.html#conditions" class="subtopic">–£—Å–ª–æ–≤–∏—è</a>
                        <a href="03-javascript-basics.html#functions" class="subtopic">–§—É–Ω–∫—Ü–∏–∏</a>
                        <a href="03-javascript-basics.html#loops-arrays" class="subtopic">–¶–∏–∫–ª—ã –∏ –º–∞—Å—Å–∏–≤—ã</a>
                        <a href="03-javascript-basics.html#dom-basics" class="subtopic">DOM –æ—Å–Ω–æ–≤—ã</a>
                        <a href="03-javascript-basics.html#dom-events" class="subtopic">–°–æ–±—ã—Ç–∏—è</a>
                        <a href="03-javascript-basics.html#forms-js" class="subtopic">–§–æ—Ä–º—ã –∏ JS</a>
                        <a href="03-javascript-basics.html#storage" class="subtopic">Storage</a>
                        <a href="03-javascript-basics.html#async-fetch" class="subtopic">Async –∏ Fetch</a>
                        <a href="03-javascript-basics.html#module3-project" class="subtopic">–ü—Ä–æ–µ–∫—Ç</a>
                    </div>
                </div>
                <div class="topic">
                    <button class="topic-btn">4. Responsive</button>
                    <div class="subtopics">
                        <a href="04-responsive-design.html#intro" class="subtopic">–í–≤–µ–¥–µ–Ω–∏–µ</a>
                        <a href="04-responsive-design.html#viewport" class="subtopic">Viewport</a>
                        <a href="04-responsive-design.html#media-queries" class="subtopic">–ú–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å—ã</a>
                        <a href="04-responsive-design.html#mobile-first" class="subtopic">Mobile First</a>
                        <a href="04-responsive-design.html#breakpoints" class="subtopic">–ë—Ä–µ–π–∫–ø–æ–∏–Ω—Ç—ã</a>
                        <a href="04-responsive-design.html#fluid-typography" class="subtopic">–¢–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞</a>
                        <a href="04-responsive-design.html#responsive-images" class="subtopic">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</a>
                        <a href="04-responsive-design.html#container-queries" class="subtopic">Container Queries</a>
                        <a href="04-responsive-design.html#responsive-patterns" class="subtopic">–ü–∞—Ç—Ç–µ—Ä–Ω—ã</a>
                        <a href="04-responsive-design.html#best-practices" class="subtopic">Best practices</a>
                    </div>
                </div>
                <div class="topic">
                    <button class="topic-btn">5. Flex & Grid</button>
                    <div class="subtopics">
                        <a href="05-flexbox-grid.html#flexbox-intro" class="subtopic">Flexbox: –≤–≤–µ–¥–µ–Ω–∏–µ</a>
                        <a href="05-flexbox-grid.html#flex-container" class="subtopic">Flex Container</a>
                        <a href="05-flexbox-grid.html#flex-items" class="subtopic">Flex Items</a>
                        <a href="05-flexbox-grid.html#flex-patterns" class="subtopic">–ü–∞—Ç—Ç–µ—Ä–Ω—ã Flex</a>
                        <a href="05-flexbox-grid.html#grid-intro" class="subtopic">Grid: –≤–≤–µ–¥–µ–Ω–∏–µ</a>
                        <a href="05-flexbox-grid.html#grid-container" class="subtopic">Grid Container</a>
                        <a href="05-flexbox-grid.html#grid-items" class="subtopic">Grid Items</a>
                        <a href="05-flexbox-grid.html#grid-areas" class="subtopic">Grid Areas</a>
                        <a href="05-flexbox-grid.html#flex-vs-grid" class="subtopic">Flex vs Grid</a>
                        <a href="05-flexbox-grid.html#real-layouts" class="subtopic">–†–µ–∞–ª—å–Ω—ã–µ –º–∞–∫–µ—Ç—ã</a>
                    </div>
                </div>
                <div class="topic">
                    <button class="topic-btn">6. –§–æ—Ä–º—ã</button>
                    <div class="subtopics">
                        <a href="06-forms-validation.html#form-basics" class="subtopic">–û—Å–Ω–æ–≤—ã —Ñ–æ—Ä–º</a>
                        <a href="06-forms-validation.html#input-types" class="subtopic">–¢–∏–ø—ã –ø–æ–ª–µ–π</a>
                        <a href="06-forms-validation.html#native-validation" class="subtopic">–ù–∞—Ç–∏–≤–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è</a>
                        <a href="06-forms-validation.html#css-validation" class="subtopic">CSS –≤–∞–ª–∏–¥–∞—Ü–∏—è</a>
                        <a href="06-forms-validation.html#js-validation" class="subtopic">JS –≤–∞–ª–∏–¥–∞—Ü–∏—è</a>
                        <a href="06-forms-validation.html#accessibility" class="subtopic">–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å</a>
                        <a href="06-forms-validation.html#ux-patterns" class="subtopic">UX-–ø–∞—Ç—Ç–µ—Ä–Ω—ã</a>
                        <a href="06-forms-validation.html#security" class="subtopic">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</a>
                        <a href="06-forms-validation.html#real-forms" class="subtopic">–†–µ–∞–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—ã</a>
                    </div>
                </div>
                <div class="topic">
                    <button class="topic-btn">7. DOM</button>
                    <div class="subtopics">
                        <a href="07-dom-advanced.html#dom-tree" class="subtopic">–î–µ—Ä–µ–≤–æ DOM</a>
                        <a href="07-dom-advanced.html#selectors" class="subtopic">–°–µ–ª–µ–∫—Ç–æ—Ä—ã</a>
                        <a href="07-dom-advanced.html#traversal" class="subtopic">–û–±—Ö–æ–¥</a>
                        <a href="07-dom-advanced.html#manipulation" class="subtopic">–ú–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏</a>
                        <a href="07-dom-advanced.html#events-basics" class="subtopic">–°–æ–±—ã—Ç–∏—è</a>
                        <a href="07-dom-advanced.html#event-delegation" class="subtopic">–î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ</a>
                        <a href="07-dom-advanced.html#custom-events" class="subtopic">–ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è</a>
                        <a href="07-dom-advanced.html#observers" class="subtopic">Observers</a>
                        <a href="07-dom-advanced.html#performance" class="subtopic">–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</a>
                    </div>
                </div>
                <div class="topic">
                    <button class="topic-btn active">8. Async & API</button>
                    <div class="subtopics">
                        <a href="#sync-async" class="subtopic active">Sync –∏ Async</a>
                        <a href="#promises" class="subtopic">Promise</a>
                        <a href="#async-await" class="subtopic">async/await</a>
                        <a href="#fetch-api" class="subtopic">Fetch API</a>
                        <a href="#rest-api" class="subtopic">REST API</a>
                        <a href="#error-handling" class="subtopic">–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫</a>
                        <a href="#parallel" class="subtopic">–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã</a>
                        <a href="#caching" class="subtopic">–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ</a>
                        <a href="#websockets" class="subtopic">WebSockets</a>
                        <a href="#real-projects" class="subtopic">–†–µ–∞–ª—å–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã</a>
                    </div>
                </div>
                <div class="topic">
                    <button class="topic-btn">9. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è</button>
                    <div class="subtopics">
                        <a href="09-optimization.html#core-web-vitals" class="subtopic">Core Web Vitals</a>
                        <a href="09-optimization.html#lcp" class="subtopic">LCP</a>
                        <a href="09-optimization.html#cls" class="subtopic">CLS</a>
                        <a href="09-optimization.html#images" class="subtopic">–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</a>
                        <a href="09-optimization.html#fonts" class="subtopic">–®—Ä–∏—Ñ—Ç—ã</a>
                        <a href="09-optimization.html#js-perf" class="subtopic">JS –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</a>
                        <a href="09-optimization.html#css-perf" class="subtopic">CSS –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</a>
                        <a href="09-optimization.html#seo" class="subtopic">SEO</a>
                        <a href="09-optimization.html#accessibility" class="subtopic">–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å</a>
                        <a href="09-optimization.html#tools" class="subtopic">–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</a>
                    </div>
                </div>
                <div class="topic">
                    <button class="topic-btn">10. –ü—Ä–æ–µ–∫—Ç—ã</button>
                    <div class="subtopics">
                        <a href="10-projects.html#intro" class="subtopic">–í–≤–µ–¥–µ–Ω–∏–µ</a>
                        <a href="10-projects.html#project-1" class="subtopic">–ü—Ä–æ–µ–∫—Ç 1</a>
                        <a href="10-projects.html#project-2" class="subtopic">–ü—Ä–æ–µ–∫—Ç 2</a>
                        <a href="10-projects.html#project-3" class="subtopic">–ü—Ä–æ–µ–∫—Ç 3</a>
                        <a href="10-projects.html#project-4" class="subtopic">–ü—Ä–æ–µ–∫—Ç 4</a>
                        <a href="10-projects.html#project-5" class="subtopic">–ü—Ä–æ–µ–∫—Ç 5</a>
                        <a href="10-projects.html#project-6" class="subtopic">–ü—Ä–æ–µ–∫—Ç 6</a>
                        <a href="10-projects.html#deployment" class="subtopic">–î–µ–ø–ª–æ–π</a>
                        <a href="10-projects.html#next-steps" class="subtopic">–î–∞–ª—å—à–µ</a>
                    </div>
                </div>
            </div>
        </div>

        <main id="content" class="content sidebar-active">
            <section class="module-intro">
                <h2>–ú–æ–¥—É–ª—å 8: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å –∏ API</h2>
                <p>–ú–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ —Ä–∞–±–æ—Ç—ã —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º –∫–æ–¥–æ–º, Promises, async/await –∏ Fetch API.</p>
            </section>

            <!-- 8.1 –°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å vs –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å -->
            <section id="sync-async" class="topic-section">
                <h2>–°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å vs –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å</h2>

                <h3>–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">// –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ –ø–æ—Ä—è–¥–∫—É
console.log('1');
console.log('2');
console.log('3');
// –í—ã–≤–æ–¥: 1, 2, 3

// –ë–ª–æ–∫–∏—Ä—É—é—â–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
const start = Date.now();
while (Date.now() - start < 3000) {} // –ë–ª–æ–∫–∏—Ä—É–µ—Ç –Ω–∞ 3 —Å–µ–∫!
console.log('–ì–æ—Ç–æ–≤–æ'); // –¢–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã</code></pre>
                </div>

                <h3>–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">// –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π ‚Äî –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç
console.log('1');

setTimeout(() => {
  console.log('2'); // –í—ã–ø–æ–ª–Ω–∏—Ç—Å—è –ø–æ–∑–∂–µ
}, 1000);

console.log('3');
// –í—ã–≤–æ–¥: 1, 3, 2

// Event Loop –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</code></pre>
                </div>

                <h3>Event Loop</h3>
                
                <div class="visual-guide">
                    <h4>–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Event Loop</h4>
                    <ol>
                        <li><strong>Call Stack</strong> ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥</li>
                        <li><strong>Web APIs</strong> ‚Äî –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç async –æ–ø–µ—Ä–∞—Ü–∏–∏ (setTimeout, fetch)</li>
                        <li><strong>Task Queue (Macrotask)</strong> ‚Äî setTimeout, setInterval, I/O</li>
                        <li><strong>Microtask Queue</strong> ‚Äî Promise, queueMicrotask (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç!)</li>
                        <li>Event Loop –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç –∑–∞–¥–∞—á–∏ –∏–∑ –æ—á–µ—Ä–µ–¥–µ–π –≤ Call Stack</li>
                    </ol>
                </div>

                <div class="code-example">
<pre><code class="language-javascript">console.log('1'); // –°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ

setTimeout(() => console.log('2'), 0); // Macrotask

Promise.resolve().then(() => console.log('3')); // Microtask

console.log('4'); // –°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ

// –í—ã–≤–æ–¥: 1, 4, 3, 2
// Microtask –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–∞–Ω—å—à–µ macrotask!</code></pre>
                </div>
            </section>

            <!-- 8.2 Callbacks -->
            <section id="callbacks" class="topic-section">
                <h2>Callbacks</h2>

                <h3>–ß—Ç–æ —Ç–∞–∫–æ–µ callback</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">// Callback ‚Äî —Ñ—É–Ω–∫—Ü–∏—è, –ø–µ—Ä–µ–¥–∞–Ω–Ω–∞—è –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç
function fetchData(callback) {
  setTimeout(() => {
    const data = { name: '–ò–≤–∞–Ω' };
    callback(data);
  }, 1000);
}

fetchData((data) => {
  console.log(data.name); // "–ò–≤–∞–Ω" —á–µ—Ä–µ–∑ 1 —Å–µ–∫
});</code></pre>
                </div>

                <h3>Callback Hell</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">//  –ü—Ä–æ–±–ª–µ–º–∞: –≤–ª–æ–∂–µ–Ω–Ω—ã–µ callbacks
getUser(userId, (user) => {
  getOrders(user.id, (orders) => {
    getOrderDetails(orders[0].id, (details) => {
      getProduct(details.productId, (product) => {
        console.log(product);
        // –≠—Ç–æ "Callback Hell" –∏–ª–∏ "Pyramid of Doom"
      });
    });
  });
});</code></pre>
                </div>

                <div class="warn">
                    <h4>–ü—Ä–æ–±–ª–µ–º—ã callbacks</h4>
                    <ul>
                        <li>–í–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å (Callback Hell)</li>
                        <li>–°–ª–æ–∂–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫</li>
                        <li>–¢—Ä—É–¥–Ω–æ —á–∏—Ç–∞—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å</li>
                    </ul>
                </div>
            </section>

            <!-- 8.3 Promises -->
            <section id="promises" class="topic-section">
                <h2>Promises</h2>

                <h3>–ß—Ç–æ —Ç–∞–∫–æ–µ Promise</h3>
                <p><strong>Promise</strong> ‚Äî –æ–±—ä–µ–∫—Ç, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏.</p>

                <div class="code-example">
<pre><code class="language-javascript">// –°–æ–∑–¥–∞–Ω–∏–µ Promise
const promise = new Promise((resolve, reject) => {
  // –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
  setTimeout(() => {
    const success = true;
    if (success) {
      resolve({ data: '–î–∞–Ω–Ω—ã–µ' }); // –£—Å–ø–µ—Ö
    } else {
      reject(new Error('–û—à–∏–±–∫–∞'));  // –ù–µ—É–¥–∞—á–∞
    }
  }, 1000);
});

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
promise
  .then(result => console.log(result))
  .catch(error => console.error(error));</code></pre>
                </div>

                <h3>–°–æ—Å—Ç–æ—è–Ω–∏—è Promise</h3>
                
                <div class="info-table">
                    <table>
                        <thead>
                            <tr>
                                <th>–°–æ—Å—Ç–æ—è–Ω–∏–µ</th>
                                <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>pending</code></td>
                                <td>–û–∂–∏–¥–∞–Ω–∏–µ (–Ω–∞—á–∞–ª—å–Ω–æ–µ)</td>
                            </tr>
                            <tr>
                                <td><code>fulfilled</code></td>
                                <td>–í—ã–ø–æ–ª–Ω–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ (resolve)</td>
                            </tr>
                            <tr>
                                <td><code>rejected</code></td>
                                <td>–û—Ç–∫–ª–æ–Ω–µ–Ω–æ (reject)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>–¶–µ–ø–æ—á–∫–∏ Promise (Chaining)</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">//  –†–µ—à–µ–Ω–∏–µ Callback Hell
getUser(userId)
  .then(user => getOrders(user.id))
  .then(orders => getOrderDetails(orders[0].id))
  .then(details => getProduct(details.productId))
  .then(product => console.log(product))
  .catch(error => console.error('–û—à–∏–±–∫–∞:', error));

// –ö–∞–∂–¥—ã–π .then –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–π Promise
fetch('/api/user')
  .then(response => response.json())  // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç Promise
  .then(data => {
    console.log(data);
    return data.id;  // –û–±—ã—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ ‚Äî –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ Promise
  })
  .then(id => fetch(`/api/orders/${id}`))
  .then(response => response.json())
  .then(orders => console.log(orders));</code></pre>
                </div>

                <h3>–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã Promise</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">// Promise.resolve / Promise.reject
Promise.resolve(42).then(x => console.log(x)); // 42
Promise.reject(new Error('Oops')).catch(e => console.error(e));

// Promise.all ‚Äî –∂–¥—ë—Ç –í–°–ï, –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ
const results = await Promise.all([
  fetch('/api/users'),
  fetch('/api/posts'),
  fetch('/api/comments')
]);

// Promise.allSettled ‚Äî –∂–¥—ë—Ç –í–°–ï, –Ω–µ –ø–∞–¥–∞–µ—Ç
const results = await Promise.allSettled([
  fetch('/api/users'),
  fetch('/api/might-fail')
]);
// [{status: 'fulfilled', value: ...}, {status: 'rejected', reason: ...}]

// Promise.race ‚Äî –ø–µ—Ä–≤—ã–π –∑–∞–≤–µ—Ä—à–∏–≤—à–∏–π—Å—è (—É—Å–ø–µ—Ö –∏–ª–∏ –æ—à–∏–±–∫–∞)
const fastest = await Promise.race([
  fetch('/api/server1'),
  fetch('/api/server2')
]);

// Promise.any ‚Äî –ø–µ—Ä–≤—ã–π –£–°–ü–ï–®–ù–´–ô
const firstSuccess = await Promise.any([
  fetch('/api/might-fail'),
  fetch('/api/might-succeed')
]);</code></pre>
                </div>
            </section>

            <!-- 8.4 async/await -->
            <section id="async-await" class="topic-section">
                <h2>async/await</h2>

                <h3>–°–∏–Ω—Ç–∞–∫—Å–∏—Å</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">// async —Ñ—É–Ω–∫—Ü–∏—è –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç Promise
async function getData() {
  return '–¥–∞–Ω–Ω—ã–µ';
}
getData().then(console.log); // '–¥–∞–Ω–Ω—ã–µ'

// await –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–æ resolve
async function fetchUser() {
  const response = await fetch('/api/user');
  const user = await response.json();
  return user;
}

// –°—Ä–∞–≤–Ω–µ–Ω–∏–µ
// Promise:
function getUser() {
  return fetch('/api/user')
    .then(res => res.json())
    .then(user => user);
}

// async/await:
async function getUser() {
  const res = await fetch('/api/user');
  const user = await res.json();
  return user;
}</code></pre>
                </div>

                <h3>–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ vs –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">//  –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ (–º–µ–¥–ª–µ–Ω–Ω–æ!)
async function fetchAll() {
  const users = await fetch('/api/users');    // 1 —Å–µ–∫
  const posts = await fetch('/api/posts');    // + 1 —Å–µ–∫
  const comments = await fetch('/api/comments'); // + 1 —Å–µ–∫
  // –ò—Ç–æ–≥–æ: 3 —Å–µ–∫—É–Ω–¥—ã
}

//  –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ (–±—ã—Å—Ç—Ä–æ!)
async function fetchAll() {
  const [users, posts, comments] = await Promise.all([
    fetch('/api/users'),
    fetch('/api/posts'),
    fetch('/api/comments')
  ]);
  // –ò—Ç–æ–≥–æ: ~1 —Å–µ–∫—É–Ω–¥–∞ (—Å–∞–º—ã–π –º–µ–¥–ª–µ–Ω–Ω—ã–π)
}

//  –ò–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å, –ø–æ—Ç–æ–º —Å–æ–±—Ä–∞—Ç—å
async function fetchAll() {
  // –ó–∞–ø—É—Å–∫–∞–µ–º –í–°–ï —Å—Ä–∞–∑—É
  const usersPromise = fetch('/api/users');
  const postsPromise = fetch('/api/posts');
  const commentsPromise = fetch('/api/comments');
  
  // –ñ–¥—ë–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
  const users = await usersPromise;
  const posts = await postsPromise;
  const comments = await commentsPromise;
}</code></pre>
                </div>

                <h3>await –≤ —Ü–∏–∫–ª–∞—Ö</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">const ids = [1, 2, 3, 4, 5];

//  –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
for (const id of ids) {
  const user = await fetchUser(id); // –ñ–¥—ë—Ç –∫–∞–∂–¥–æ–≥–æ
  console.log(user);
}

//  –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
const users = await Promise.all(
  ids.map(id => fetchUser(id))
);
console.log(users);

//  –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∫–∞–∂–¥–æ–≥–æ
await Promise.all(ids.map(async (id) => {
  const user = await fetchUser(id);
  await processUser(user);
}));</code></pre>
                </div>
            </section>

            <!-- 8.5 –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ -->
            <section id="error-handling" class="topic-section">
                <h2>–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫</h2>

                <h3>try/catch —Å async/await</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">async function fetchData() {
  try {
    const response = await fetch('/api/data');
    
    if (!response.ok) {
      throw new Error(`HTTP error! Status: ${response.status}`);
    }
    
    const data = await response.json();
    return data;
  } catch (error) {
    if (error.name === 'TypeError') {
      console.error('–°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞:', error.message);
    } else {
      console.error('–û—à–∏–±–∫–∞:', error.message);
    }
    throw error; // –ü—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ–º –¥–∞–ª—å—à–µ
  } finally {
    console.log('–ó–∞–ø—Ä–æ—Å –∑–∞–≤–µ—Ä—à—ë–Ω');
  }
}</code></pre>
                </div>

                <h3>–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ Promise.all</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">// Promise.all –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –ü–ï–†–í–û–ô –æ—à–∏–±–∫–µ
try {
  const results = await Promise.all([
    fetch('/api/1'),
    fetch('/api/might-fail'),
    fetch('/api/3')
  ]);
} catch (error) {
  // –°—Ä–∞–±–æ—Ç–∞–µ—Ç –µ—Å–ª–∏ –õ–Æ–ë–û–ô –∑–∞–ø—Ä–æ—Å —É–ø–∞–¥—ë—Ç
}

// Promise.allSettled –Ω–µ –ø–∞–¥–∞–µ—Ç
const results = await Promise.allSettled([
  fetch('/api/1'),
  fetch('/api/might-fail'),
  fetch('/api/3')
]);

results.forEach((result, index) => {
  if (result.status === 'fulfilled') {
    console.log(`–ó–∞–ø—Ä–æ—Å ${index}: —É—Å–ø–µ—Ö`, result.value);
  } else {
    console.error(`–ó–∞–ø—Ä–æ—Å ${index}: –æ—à–∏–±–∫–∞`, result.reason);
  }
});</code></pre>
                </div>

                <h3>–ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">// –ù–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ Promise rejections
window.addEventListener('unhandledrejection', (event) => {
  console.error('–ù–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ Promise:', event.reason);
  // –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
  sendToErrorTracking(event.reason);
});

// –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫
window.addEventListener('error', (event) => {
  console.error('–ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞:', event.error);
});</code></pre>
                </div>
            </section>

            <!-- 8.6 Fetch API -->
            <section id="fetch-api" class="topic-section">
                <h2>Fetch API</h2>

                <h3>–ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">// GET –∑–∞–ø—Ä–æ—Å
const response = await fetch('https://api.example.com/users');
const users = await response.json();

// POST –∑–∞–ø—Ä–æ—Å
const response = await fetch('https://api.example.com/users', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    name: '–ò–≤–∞–Ω',
    email: 'ivan@example.com'
  })
});

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
if (!response.ok) {
  throw new Error(`HTTP error! Status: ${response.status}`);
}

const newUser = await response.json();</code></pre>
                </div>

                <h3>–û–±—ä–µ–∫—Ç Response</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">const response = await fetch('/api/data');

// –°–≤–æ–π—Å—Ç–≤–∞
response.ok;         // true –µ—Å–ª–∏ —Å—Ç–∞—Ç—É—Å 200-299
response.status;     // 200, 404, 500...
response.statusText; // "OK", "Not Found"...
response.headers;    // Headers –æ–±—ä–µ–∫—Ç
response.url;        // URL –∑–∞–ø—Ä–æ—Å–∞
response.type;       // "basic", "cors", "opaque"

// –ú–µ—Ç–æ–¥—ã —á—Ç–µ–Ω–∏—è body (–º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –û–î–ò–ù —Ä–∞–∑!)
const json = await response.json();   // JSON ‚Üí Object
const text = await response.text();   // String
const blob = await response.blob();   // Blob (—Ñ–∞–π–ª—ã)
const buffer = await response.arrayBuffer(); // Binary
const formData = await response.formData();  // FormData

// –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è
const clone = response.clone();
const json1 = await response.json();
const json2 = await clone.json();</code></pre>
                </div>

                <h3>Headers</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">// –ß—Ç–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –æ—Ç–≤–µ—Ç–∞
response.headers.get('Content-Type');
response.headers.has('Authorization');

for (const [key, value] of response.headers) {
  console.log(`${key}: ${value}`);
}

// –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞
const headers = new Headers();
headers.append('Content-Type', 'application/json');
headers.append('Authorization', 'Bearer token123');

// –ò–ª–∏ –æ–±—ä–µ–∫—Ç–æ–º
const headers = {
  'Content-Type': 'application/json',
  'Authorization': 'Bearer token123'
};</code></pre>
                </div>

                <h3>–û–ø—Ü–∏–∏ fetch</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">const response = await fetch(url, {
  method: 'POST',           // GET, POST, PUT, DELETE, PATCH
  headers: { ... },
  body: JSON.stringify(data),
  
  mode: 'cors',             // cors, no-cors, same-origin
  credentials: 'include',   // include, same-origin, omit
  cache: 'no-cache',        // default, no-cache, reload, force-cache
  redirect: 'follow',       // follow, error, manual
  referrerPolicy: 'no-referrer',
  
  signal: abortController.signal  // –î–ª—è –æ—Ç–º–µ–Ω—ã
});</code></pre>
                </div>
            </section>

            <!-- 8.7 REST API -->
            <section id="rest-api" class="topic-section">
                <h2>–†–∞–±–æ—Ç–∞ —Å REST API</h2>

                <h3>CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">const API_URL = 'https://api.example.com';

// CREATE (POST)
async function createUser(userData) {
  const response = await fetch(`${API_URL}/users`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(userData)
  });
  return response.json();
}

// READ (GET)
async function getUser(id) {
  const response = await fetch(`${API_URL}/users/${id}`);
  return response.json();
}

async function getUsers(params = {}) {
  const query = new URLSearchParams(params).toString();
  const response = await fetch(`${API_URL}/users?${query}`);
  return response.json();
}

// UPDATE (PUT/PATCH)
async function updateUser(id, userData) {
  const response = await fetch(`${API_URL}/users/${id}`, {
    method: 'PATCH',  // –∏–ª–∏ PUT –¥–ª—è –ø–æ–ª–Ω–æ–π –∑–∞–º–µ–Ω—ã
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(userData)
  });
  return response.json();
}

// DELETE
async function deleteUser(id) {
  const response = await fetch(`${API_URL}/users/${id}`, {
    method: 'DELETE'
  });
  return response.ok;
}</code></pre>
                </div>

                <h3>API –∫–ª–∏–µ–Ω—Ç</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">class ApiClient {
  constructor(baseURL, options = {}) {
    this.baseURL = baseURL;
    this.defaultHeaders = {
      'Content-Type': 'application/json',
      ...options.headers
    };
  }
  
  async request(endpoint, options = {}) {
    const url = `${this.baseURL}${endpoint}`;
    const config = {
      ...options,
      headers: {
        ...this.defaultHeaders,
        ...options.headers
      }
    };
    
    if (config.body && typeof config.body === 'object') {
      config.body = JSON.stringify(config.body);
    }
    
    const response = await fetch(url, config);
    
    if (!response.ok) {
      const error = await response.json().catch(() => ({}));
      throw new ApiError(response.status, error.message || 'API Error');
    }
    
    return response.json();
  }
  
  get(endpoint, params) {
    const query = params ? `?${new URLSearchParams(params)}` : '';
    return this.request(`${endpoint}${query}`);
  }
  
  post(endpoint, data) {
    return this.request(endpoint, { method: 'POST', body: data });
  }
  
  put(endpoint, data) {
    return this.request(endpoint, { method: 'PUT', body: data });
  }
  
  patch(endpoint, data) {
    return this.request(endpoint, { method: 'PATCH', body: data });
  }
  
  delete(endpoint) {
    return this.request(endpoint, { method: 'DELETE' });
  }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const api = new ApiClient('https://api.example.com');
const users = await api.get('/users', { page: 1, limit: 10 });
const newUser = await api.post('/users', { name: '–ò–≤–∞–Ω' });</code></pre>
                </div>
            </section>

            <!-- 8.8 –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π Fetch -->
            <section id="advanced-fetch" class="topic-section">
                <h2>–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π Fetch</h2>

                <h3>–û—Ç–º–µ–Ω–∞ –∑–∞–ø—Ä–æ—Å–∞ (AbortController)</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">const controller = new AbortController();

// –ó–∞–ø—Ä–æ—Å —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ—Ç–º–µ–Ω—ã
fetch('/api/data', { signal: controller.signal })
  .then(response => response.json())
  .catch(error => {
    if (error.name === 'AbortError') {
      console.log('–ó–∞–ø—Ä–æ—Å –æ—Ç–º–µ–Ω—ë–Ω');
    }
  });

// –û—Ç–º–µ–Ω–∞ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥ (timeout)
setTimeout(() => controller.abort(), 5000);

// –ò–ª–∏ –ø–æ –¥–µ–π—Å—Ç–≤–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
button.addEventListener('click', () => controller.abort());

// Timeout helper
async function fetchWithTimeout(url, options = {}, timeout = 5000) {
  const controller = new AbortController();
  const id = setTimeout(() => controller.abort(), timeout);
  
  try {
    const response = await fetch(url, {
      ...options,
      signal: controller.signal
    });
    return response;
  } finally {
    clearTimeout(id);
  }
}</code></pre>
                </div>

                <h3>–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">// –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
async function uploadFile(file) {
  const formData = new FormData();
  formData.append('file', file);
  formData.append('name', file.name);
  
  const response = await fetch('/api/upload', {
    method: 'POST',
    body: formData  // –ù–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ Content-Type!
  });
  
  return response.json();
}

// –° –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º (—á–µ—Ä–µ–∑ XMLHttpRequest)
function uploadWithProgress(file, onProgress) {
  return new Promise((resolve, reject) => {
    const xhr = new XMLHttpRequest();
    
    xhr.upload.addEventListener('progress', (e) => {
      if (e.lengthComputable) {
        const percent = (e.loaded / e.total) * 100;
        onProgress(percent);
      }
    });
    
    xhr.addEventListener('load', () => {
      if (xhr.status >= 200 && xhr.status < 300) {
        resolve(JSON.parse(xhr.responseText));
      } else {
        reject(new Error(`HTTP ${xhr.status}`));
      }
    });
    
    xhr.addEventListener('error', () => reject(new Error('Network error')));
    
    const formData = new FormData();
    formData.append('file', file);
    
    xhr.open('POST', '/api/upload');
    xhr.send(formData);
  });
}</code></pre>
                </div>

                <h3>–°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">async function downloadFile(url, filename) {
  const response = await fetch(url);
  const blob = await response.blob();
  
  // –°–æ–∑–¥–∞—ë–º —Å—Å—ã–ª–∫—É –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = filename;
  link.click();
  
  // –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º –ø–∞–º—è—Ç—å
  URL.revokeObjectURL(link.href);
}</code></pre>
                </div>

                <h3>Retry –ª–æ–≥–∏–∫–∞</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">async function fetchWithRetry(url, options = {}, retries = 3, delay = 1000) {
  for (let i = 0; i < retries; i++) {
    try {
      const response = await fetch(url, options);
      if (response.ok) return response;
      
      // Retry —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤
      if (response.status >= 500) {
        throw new Error(`Server error: ${response.status}`);
      }
      
      return response; // 4xx ‚Äî –Ω–µ retry
    } catch (error) {
      if (i === retries - 1) throw error;
      
      console.log(`–ü–æ–ø—ã—Ç–∫–∞ ${i + 1} –Ω–µ —É–¥–∞–ª–∞—Å—å, –ø–æ–≤—Ç–æ—Ä —á–µ—Ä–µ–∑ ${delay}ms`);
      await new Promise(r => setTimeout(r, delay));
      delay *= 2; // Exponential backoff
    }
  }
}</code></pre>
                </div>
            </section>

            <!-- 8.9 –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã -->
            <section id="parallel" class="topic-section">
                <h2>–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã</h2>

                <h3>Promise.all</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">// –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
async function loadDashboard() {
  const [user, orders, notifications] = await Promise.all([
    fetch('/api/user').then(r => r.json()),
    fetch('/api/orders').then(r => r.json()),
    fetch('/api/notifications').then(r => r.json())
  ]);
  
  return { user, orders, notifications };
}

// –° –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ
async function loadDashboardSafe() {
  const results = await Promise.allSettled([
    fetch('/api/user').then(r => r.json()),
    fetch('/api/orders').then(r => r.json()),
    fetch('/api/notifications').then(r => r.json())
  ]);
  
  return {
    user: results[0].status === 'fulfilled' ? results[0].value : null,
    orders: results[1].status === 'fulfilled' ? results[1].value : [],
    notifications: results[2].status === 'fulfilled' ? results[2].value : []
  };
}</code></pre>
                </div>

                <h3>–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç–∏</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">// –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∞—Å—Å–∏–≤ –ø—Ä–æ–º–∏—Å–æ–≤ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º
async function parallelLimit(tasks, limit) {
  const results = [];
  const executing = [];
  
  for (const task of tasks) {
    const p = Promise.resolve().then(() => task());
    results.push(p);
    
    if (limit <= tasks.length) {
      const e = p.then(() => executing.splice(executing.indexOf(e), 1));
      executing.push(e);
      
      if (executing.length >= limit) {
        await Promise.race(executing);
      }
    }
  }
  
  return Promise.all(results);
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const urls = [...]; // 100 URL
const results = await parallelLimit(
  urls.map(url => () => fetch(url).then(r => r.json())),
  5  // –ú–∞–∫—Å–∏–º—É–º 5 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
);</code></pre>
                </div>
            </section>

            <!-- 8.10 –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ -->
            <section id="caching" class="topic-section">
                <h2>–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ</h2>

                <h3>–ü—Ä–æ—Å—Ç–æ–π –∫—ç—à –≤ –ø–∞–º—è—Ç–∏</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">const cache = new Map();

async function fetchWithCache(url, ttl = 60000) {
  const cached = cache.get(url);
  
  if (cached && Date.now() - cached.timestamp < ttl) {
    return cached.data;
  }
  
  const response = await fetch(url);
  const data = await response.json();
  
  cache.set(url, { data, timestamp: Date.now() });
  
  return data;
}

// –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π
function clearExpiredCache(ttl) {
  const now = Date.now();
  for (const [key, value] of cache) {
    if (now - value.timestamp > ttl) {
      cache.delete(key);
    }
  }
}</code></pre>
                </div>

                <h3>Cache API</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">// –û—Ç–∫—Ä—ã—Ç—å –∫—ç—à
const cache = await caches.open('api-cache-v1');

// –î–æ–±–∞–≤–∏—Ç—å –≤ –∫—ç—à
await cache.put('/api/data', response);
await cache.add('/api/data'); // fetch + put

// –ü–æ–ª—É—á–∏—Ç—å –∏–∑ –∫—ç—à–∞
const cachedResponse = await cache.match('/api/data');

// –°—Ç—Ä–∞—Ç–µ–≥–∏—è: Cache First, Network Fallback
async function cacheFirst(url) {
  const cachedResponse = await caches.match(url);
  if (cachedResponse) return cachedResponse;
  
  const response = await fetch(url);
  const cache = await caches.open('api-cache');
  cache.put(url, response.clone());
  
  return response;
}

// –°—Ç—Ä–∞—Ç–µ–≥–∏—è: Network First, Cache Fallback
async function networkFirst(url) {
  try {
    const response = await fetch(url);
    const cache = await caches.open('api-cache');
    cache.put(url, response.clone());
    return response;
  } catch {
    return caches.match(url);
  }
}</code></pre>
                </div>
            </section>

            <!-- 8.11 WebSockets -->
            <section id="websockets" class="topic-section">
                <h2>WebSockets</h2>

                <h3>–ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">const ws = new WebSocket('wss://api.example.com/ws');

// –°–æ–±—ã—Ç–∏—è
ws.addEventListener('open', () => {
  console.log('–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç–æ');
  ws.send(JSON.stringify({ type: 'subscribe', channel: 'updates' }));
});

ws.addEventListener('message', (event) => {
  const data = JSON.parse(event.data);
  console.log('–ü–æ–ª—É—á–µ–Ω–æ:', data);
});

ws.addEventListener('close', (event) => {
  console.log(`–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ: ${event.code} ${event.reason}`);
});

ws.addEventListener('error', (error) => {
  console.error('–û—à–∏–±–∫–∞ WebSocket:', error);
});

// –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
ws.send(JSON.stringify({ type: 'message', text: '–ü—Ä–∏–≤–µ—Ç!' }));

// –ó–∞–∫—Ä—ã—Ç–∏–µ
ws.close(1000, '–ù–æ—Ä–º–∞–ª—å–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ');</code></pre>
                </div>

                <h3>WebSocket —Å —Ä–µ–∫–æ–Ω–Ω–µ–∫—Ç–æ–º</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">class ReconnectingWebSocket {
  constructor(url, options = {}) {
    this.url = url;
    this.reconnectInterval = options.reconnectInterval || 1000;
    this.maxReconnectInterval = options.maxReconnectInterval || 30000;
    this.handlers = { message: [], open: [], close: [], error: [] };
    this.connect();
  }
  
  connect() {
    this.ws = new WebSocket(this.url);
    
    this.ws.onopen = () => {
      this.reconnectInterval = 1000;
      this.handlers.open.forEach(h => h());
    };
    
    this.ws.onmessage = (e) => {
      this.handlers.message.forEach(h => h(JSON.parse(e.data)));
    };
    
    this.ws.onclose = () => {
      this.handlers.close.forEach(h => h());
      this.reconnect();
    };
    
    this.ws.onerror = (e) => {
      this.handlers.error.forEach(h => h(e));
    };
  }
  
  reconnect() {
    setTimeout(() => {
      console.log('–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...');
      this.connect();
      this.reconnectInterval = Math.min(
        this.reconnectInterval * 2,
        this.maxReconnectInterval
      );
    }, this.reconnectInterval);
  }
  
  on(event, handler) {
    this.handlers[event].push(handler);
  }
  
  send(data) {
    if (this.ws.readyState === WebSocket.OPEN) {
      this.ws.send(JSON.stringify(data));
    }
  }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const ws = new ReconnectingWebSocket('wss://api.example.com/ws');
ws.on('message', (data) => console.log(data));</code></pre>
                </div>
            </section>

            <!-- 8.12 –†–µ–∞–ª—å–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã -->
            <section id="real-projects" class="topic-section">
                <h2>–†–µ–∞–ª—å–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã</h2>

                <h3>–ü–æ–∏—Å–∫ —Å debounce</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">const searchInput = document.getElementById('search');
const resultsContainer = document.getElementById('results');

let controller = null;

const search = debounce(async (query) => {
  // –û—Ç–º–µ–Ω—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∑–∞–ø—Ä–æ—Å
  if (controller) controller.abort();
  controller = new AbortController();
  
  if (!query.trim()) {
    resultsContainer.innerHTML = '';
    return;
  }
  
  try {
    const response = await fetch(
      `/api/search?q=${encodeURIComponent(query)}`,
      { signal: controller.signal }
    );
    
    const results = await response.json();
    renderResults(results);
  } catch (error) {
    if (error.name !== 'AbortError') {
      console.error('–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞:', error);
    }
  }
}, 300);

searchInput.addEventListener('input', (e) => search(e.target.value));</code></pre>
                </div>

                <h3>–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Å–∫—Ä–æ–ª–ª</h3>
                
                <div class="code-example">
<pre><code class="language-javascript">let page = 1;
let loading = false;
let hasMore = true;

const observer = new IntersectionObserver(async (entries) => {
  if (entries[0].isIntersecting && !loading && hasMore) {
    loading = true;
    showLoader();
    
    try {
      const items = await fetchItems(page);
      
      if (items.length === 0) {
        hasMore = false;
      } else {
        appendItems(items);
        page++;
      }
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', error);
    } finally {
      loading = false;
      hideLoader();
    }
  }
});

// –ù–∞–±–ª—é–¥–∞–µ–º –∑–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–º –≤ –∫–æ–Ω—Ü–µ —Å–ø–∏—Å–∫–∞
observer.observe(document.querySelector('.load-trigger'));</code></pre>
                </div>

                <div class="exercise">
                    <h4>–ò—Ç–æ–≥–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç</h4>
                    <p>–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–µ–π —Å:</p>
                    <ul>
                        <li>–ó–∞–≥—Ä—É–∑–∫–æ–π –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ –ø—É–±–ª–∏—á–Ω–æ–≥–æ API</li>
                        <li>–ü–æ–∏—Å–∫–æ–º —Å debounce</li>
                        <li>–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–º —Å–∫—Ä–æ–ª–ª–æ–º</li>
                        <li>–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º</li>
                        <li>–û–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫ –∏ retry</li>
                        <li>–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏ –∑–∞–≥—Ä—É–∑–∫–∏</li>
                    </ul>
                </div>
            </section>
        </div>
    </div>

    <div class="mobile-settings-menu" id="mobileSettingsMenu">
        <div class="mobile-settings-content">
            <div class="mobile-settings-header">
                <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                <button class="mobile-settings-close" id="mobileSettingsClose">‚úï</button>
            </div>
            <div class="mobile-settings-section">
                <h4>–¢–µ–º–∞</h4>
                <button class="mobile-theme-toggle-btn" id="mobileThemeToggle"><span class="theme-label">–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å</span></button>
            </div>
        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js"></script>
    <script src="../courses.js"></script>
</body>
</html>

